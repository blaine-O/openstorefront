
tinymce.PluginManager.add("osfmediaretriever",function(b){var c=function c(f){var e=document.createElement("html");e.innerHTML=f.getContent();var d=e.getElementsByTagName("img");return d};var a=new Ext.util.DelayedTask(function(){var d=c(b);Ext.getStore("inlineMediaStore").removeAll();if(d.length){for(var g=0;g<d.length;g++){var f=d[g].src.trim();if(f&&f.indexOf("Media.action?")===-1){if(!d[g].hasAttribute("data-storefront-ignore")){var e=Ext.getStore("inlineMediaStore");if(e.find("url",f)===-1){Ext.getStore("inlineMediaStore").add({url:f,result:"Retrieving...",status:"RETR",temporaryId:""})}}}}}Ext.getCmp("inlineMediaWindow").processMedia(b)});b.on("change",function(d){if(!Ext.getCmp("inlineMediaWindow").programmaticUpdate){a.delay(800)}})});