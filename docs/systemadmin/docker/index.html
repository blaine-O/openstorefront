<!DOCTYPE html>
<html>
  <head>
    <title>Storefront Docs</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.31.1" />

<title>Using Docker :: Storefront Docs</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

  <link href="/theme-original/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/systemadmin/docker/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <h4 style="color:white;">Open Storefront Documentation</h4>

  

    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/evaluations/" class="dd-item">
      <a href="/evaluations/">
        <span>Evaluations</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/evaluations/evaluator/" class="dd-item">
      <a href="/evaluations/evaluator/">
        <span>Evaluator</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/evaluations/evaluator/storefront-evaluators-guide/" class="dd-item">
        <a href="/evaluations/evaluator/storefront-evaluators-guide/">
          <span>Evaluators Guide</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/evaluations/evaluator/faq/" class="dd-item">
        <a href="/evaluations/evaluator/faq/">
          <span>FAQ</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/evaluations/librarian/" class="dd-item">
      <a href="/evaluations/librarian/">
        <span>Librarian</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/evaluations/librarian/basic-entry-template-for-storefront/" class="dd-item">
        <a href="/evaluations/librarian/basic-entry-template-for-storefront/">
          <span>Basic Entry Template for Storefront</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/evaluations/librarian/createevaluationguide/" class="dd-item">
        <a href="/evaluations/librarian/createevaluationguide/">
          <span>Create an Evaluation</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/evaluations/librarian/publishinganevaluationguide/" class="dd-item">
        <a href="/evaluations/librarian/publishinganevaluationguide/">
          <span>Publish an Evaluation</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/dev/" class="dd-item">
      <a href="/dev/">
        <span>Developer</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/dev/developersguide/" class="dd-item">
        <a href="/dev/developersguide/">
          <span>Developer Guide</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/architecture/" class="dd-item">
        <a href="/dev/architecture/">
          <span>Architecture</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/front-end-code-standard/" class="dd-item">
        <a href="/dev/front-end-code-standard/">
          <span>Front-end Code Standards</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/gitworkflow/" class="dd-item">
        <a href="/dev/gitworkflow/">
          <span>Git Workflow</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/jira-workflow/" class="dd-item">
        <a href="/dev/jira-workflow/">
          <span>Jira Issue Tracking Workflow</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/testing/" class="dd-item">
        <a href="/dev/testing/">
          <span>Testing</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/uiguide/" class="dd-item">
        <a href="/dev/uiguide/">
          <span>User Interface Guide</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/dev/server-code-standard/" class="dd-item">
        <a href="/dev/server-code-standard/">
          <span>Server Code Standard</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/systemadmin/" class="dd-item parent">
      <a href="/systemadmin/">
        <span>System Admin</span>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/systemadmin/setup/" class="dd-item">
        <a href="/systemadmin/setup/">
          <span>Setup</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/systemadmin/docker/" class="dd-item active">
        <a href="/systemadmin/docker/">
          <span>Using Docker</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/systemadmin/administratorguide/" class="dd-item">
        <a href="/systemadmin/administratorguide/">
          <span>Administrator Guide</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/systemadmin/datamigrationguide/" class="dd-item">
        <a href="/systemadmin/datamigrationguide/">
          <span>Data Migration Guide</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/systemadmin/versionmigrationguide/" class="dd-item">
        <a href="/systemadmin/versionmigrationguide/">
          <span>Version Migration</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/user/" class="dd-item">
      <a href="/user/">
        <span>User</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/user/userguide/" class="dd-item">
        <a href="/user/userguide/">
          <span>User Guide</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/user/quick-overview-of-submitting-a-new-component/" class="dd-item">
        <a href="/user/quick-overview-of-submitting-a-new-component/">
          <span>Submitting a New Component</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/di2e/openstorefront/tree/master" target="_blank" rel="noopener"><i class='fa fa-github'></i> Github repo</a></li>
                <li class="" role=""><a href="https://github.com/di2e/openstorefront/releases" target="_blank" rel="noopener"><i class='fa fa-download'></i> Releases</a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer"><div style="color: #E0E0DA;">
    <p>OpenStoreFront version 2.5</p>
    <p>Documentation generated on Dec 21, 2017</p>
    <p>Created using <a href="https://gohugo.io/">Hugo</a> version 0.31.1</p>
</div>
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/di2e/openstorefront/edit/master/Hugo-StaticGen-Docs/content/systemadmin/Docker.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Edit page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>OpenStoreFront Documentation</a> > <a href='/systemadmin/'>System Admin</a> > Using Docker

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#using-docker-hub">Using Docker Hub</a>
<ul>
<li><a href="#command-line">Command Line</a></li>
<li><a href="#kitematic">Kitematic</a></li>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#using-dockerfile">Using Dockerfile</a>
<ul>
<li><a href="#build">Build</a></li>
<li><a href="#run">Run</a></li>
<li><a href="#stop">Stop</a></li>
<li><a href="#start">Start</a></li>
<li><a href="#upgrading-1">Upgrading</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Using Docker</h1>
  



    
    
    
    

<p>The Open Storefront application contains a Dockerfile in order to build Docker images.</p>

<p>Open Storefront also automatically builds release versions of the application for consumption by users.  These builds are available on <a href="http://hub.docker.com">Docker Hub</a>.</p>

<h2 id="using-docker-hub">Using Docker Hub</h2>

<h3 id="command-line">Command Line</h3>

<p>To pull the latest version:</p>

<pre><code class="language-bash">docker pull flammablefork/openstorefront:latest
</code></pre>

<p>To pull a specific version:</p>

<pre><code class="language-bash">docker pull flammablefork/openstorefront:v2.2.1
</code></pre>

<h3 id="kitematic">Kitematic</h3>

<p>When using a GUI application, such as Kitematic, simply search Docker Hub for &lsquo;openstorefront&rsquo; (without quotes). Kitematic will return the matching results, and you can download the latest version (default). The container will start automatically, and you can use the controls in the application to start, stop and delete the container.</p>

<p>Kitematic will automatically assign a random port for you to access the web application in your browser. Click on the screen shot to launch a browser to the appropriate port. If the browser is not automatically launched, view the settings for the container and locate the random port (the container will always have the port 8080, so use the other port). Open a browser, and navigate to the appropriate page:</p>

<pre><code class="language-bash">http://localhost:[Random Port]
</code></pre>

<h3 id="upgrading">Upgrading</h3>

<p>The Docker containers have the ability to upgrade to more recent versions.</p>

<p>For cross-platform compatibility, the database for the web application is stored, by default, in the container itself.  Downloading the latest image and creating a new container will not re-use any existing data in the application. You must upgrade the container to use your existing data with a newer version of the application.</p>

<p>In Kitematic, select the option to execute inside the running container. Once the terminal opens up, run the following command:</p>

<pre><code class="language-bash">./upgrade.sh --to-version=[Desired Version]
</code></pre>

<p>For example, if I wanted to upgrade to version 2.2.1, execute:</p>

<pre><code class="language-bash">./upgrade.sh --to-version=2.2.1
</code></pre>

<h3 id="using-dockerfile">Using Dockerfile</h3>

<p>The Dockerfile contained in GitHub is configured for development purposes. It expects to find a WAR file built in the path of the downloaded source. This WAR file is not included when the source code is checked out. You, as a developer, must build the project first, in order to create the necessary WAR file prior to attempting to build the Docker image.  Once the WAR file is built, the build process for the Docker image will import the WAR file you have created.</p>

<h4 id="build">Build</h4>

<p>To build the Docker image:</p>

<pre><code class="language-bash">docker build -t [Tag] [Repository Name]/[Application Name] [Path To Dockerfile]
</code></pre>

<p>For example, if I had navigated to the folder containing the Dockerfile, and was wanting to build the &lsquo;development&rsquo; version for the repository above, I would use the following example command:</p>

<pre><code class="language-bash">docker build -t development flammablefork/openstorefront .
</code></pre>

<h4 id="run">Run</h4>

<p>To create and run a Docker container:</p>

<pre><code class="language-bash">docker run [Options] [Repository Name]/[Application Name]
</code></pre>

<p>After building, I would need to then create and run a Docker container from the image:</p>

<pre><code class="language-bash">docker run -d -p 8080:8080 flammablefork/openstorefront:development
</code></pre>

<p>(This will create and run a Docker container using the flammablefork/openstorefront image. &lsquo;-d&rsquo; means the container would detach from the terminal, running it in the background. It would also expose port 8080 on my development workstation, which maps to the container&rsquo;s internal port of 8080)</p>

<h4 id="stop">Stop</h4>

<p>In order to stop a container, you will need the container ID:</p>

<pre><code class="language-bash">docker ps
</code></pre>

<p>To stop a running container:</p>

<pre><code class="language-bash">docker stop [Container ID]
</code></pre>

<h4 id="start">Start</h4>

<p><strong>docker run always creates a new container - Do not use it to simply start a container</strong></p>

<p>In order to start a container, you will need the container ID:</p>

<pre><code class="language-bash">docker ps -a
</code></pre>

<p>To start an existing container:</p>

<pre><code class="language-bash">docker start [Container ID]
</code></pre>

<h4 id="upgrading-1">Upgrading</h4>

<p>The Docker containers have the ability to upgrade to more recent versions.</p>

<p>For cross-platform compatibility, the database for the web application is stored, by default, in the container itself.  Downloading the latest image and creating a new container will not re-use any existing data in the application. You must upgrade the container to use your existing data with a newer version of the application.</p>

<p>To upgrade the container:</p>

<pre><code class="language-bash">docker exec -d [Container ID] upgrade.sh --to-version=[Desired Version]
</code></pre>

<p>To get the container ID:</p>

<pre><code class="language-bash">docker ps
</code></pre>

<p>For example, if I wanted to upgrade to version 2.2.1:</p>

<pre><code class="language-bash">docker exec -d [Container ID] upgrade.sh --to-version=2.2.1
</code></pre>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/systemadmin/setup/" title="Setup"> <i class="fa fa-chevron-left"></i></a>
    <a class="nav nav-next" href="/systemadmin/administratorguide/" title="Administrator Guide" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>